parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"zemw":[function(require,module,exports) {
"use strict";function o(o,e){console.log("imageData = ",o);const n=o.width,r=o.height,a=Math.floor(n/e)||1,l=Math.floor(r/a);console.log("block width = ",a),console.log("new dimensions = ",e,"x",l);const d=new ImageData(e,l),{data:c}=d;for(let i=0;i<e;i+=1)for(let n=0;n<l;n+=1){const r=[0,0,0,0];for(let e=i*a;e<(i+1)*a;e+=1)for(let l=n*a;l<(n+1)*a;l+=1){const n=t(e,l,o);let d=0;for(;d<4;)r[d]+=n[d]/a**2,d+=1}let l=0;for(;l<4;)c[4*i+n*e*4+l]=Math.round(r[l]),l+=1}return console.log(d),d}function t(o,t,e){const n=t*(4*e.width)+4*o;return[e.data[n],e.data[n+1],e.data[n+2],e.data[n+3]]}function e({data:o}){for(let t=0;t<o.length;t+=4){const e=Math.round((o[t]+o[t+1]+o[t+2])/3),n=o[t+3],r=e*n/255+255-n;o[t]=r,o[t+1]=r,o[t+2]=r,o[t+3]=255}}function n({data:o},t=0){console.log("brightness = ",t);for(let e=0;e<o.length;e+=4){const n=(o[e]+o[e+1]+o[e+2])/3;let r=Math.round(n+n*t/10);r=r>255?255:r,o[e]=r,o[e+1]=r,o[e+2]=r}}function r({data:o},t=1){const e=o.reduce((o,t,e)=>(e+1)%4&&t>o?t:o,0),n=o.reduce((o,t,e)=>(e+1)%4&&t<o?t:o,255),r=(e-n)/2+n;if(console.log("min = ",n,", max = ",e,", middle = ",r,", coef = ",t),n!==e)for(let a=0;a<o.length;a+=4){const e=(o[a]+o[a+1]+o[a+2])/3;let n=Math.round(e+(e-r)*t);n=n>255?255:n<0?0:n,o[a]=n,o[a+1]=n,o[a+2]=n}}function a({data:o},t=1){let e=o.reduce((o,t,e)=>(e+1)%4&&t>o?t:o,0),n=o.reduce((o,t,e)=>(e+1)%4&&t<o?t:o,255);if(console.log("min = ",n,", max = ",e,", coef = ",t),n=(n=Math.round(n*t))>47?47:n,e=(e=Math.round(255-(255-e)*t))<160?160:e,console.log("min = ",n,", max = ",e),n!==e&&(0!==n||255!==e))for(let r=0;r<o.length;r+=4){const t=(o[r]+o[r+1]+o[r+2])/3;let a=Math.round(255/(e-n)*(t-n));a=a>255?255:a,o[r]=a,o[r+1]=a,o[r+2]=a}}function l({data:o},t=[63,127,191,255]){for(let e=0;e<o.length;e+=4){const n=Math.round((o[e]+o[e+1]+o[e+2])/3);let r=0;t.forEach(o=>{n>=o-16&&o>r&&(r=o)}),o[e]=r,o[e+1]=r,o[e+2]=r}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.resizeImage=o,exports.grayscale=e,exports.brightness=n,exports.contrast=r,exports.autoContrast=a,exports.levels=l,exports.mapDataToBricks=c,exports.showBricks=i;const d=[{id:0,border:0,color:"#000000"},{id:1,border:47,color:"#2f2f2f"},{id:2,border:111,color:"#6f6f6f"},{id:3,border:175,color:"#afafaf"},{id:4,border:239,color:"#efefef"}];function c({data:o,width:t},e=d){const n={data:[],width:t,mapping:e};for(let r=0;4*r<o.length;r+=1){const t=Math.round((o[4*r]+o[4*r+1]+o[4*r+2])/3);let a=0;e.forEach(o=>{t>=o.border&&o.id>a&&(a=o.id)}),n.data[r]=a}return n}function i({data:o,width:t,mapping:e},n,r=16){const a=n.getContext("2d");a.clearRect(0,0,n.width,n.height),n.width=t*r,n.height=o.length/t*r,o.map((o,n)=>{var l;a.fillStyle=(null===(l=e.find(t=>t.id===o))||void 0===l?void 0:l.color)||0;const d=n%t,c=Math.floor(n/t);a.fillRect(d*r,c*r,r-1,r-1)})}
},{}],"DFWH":[function(require,module,exports) {
"use strict";function s(s,t){const{data:e,mapping:i}=s,l=i.map(s=>{const t=e.filter(t=>t===s.id).length;return`<li class="stats_item"><div class="stats_sample" id="${s.id}" style="--color-sample:${s.color}"></div><span>${t} pieces</span></li>`}).join("");t.innerHTML='<ul class="stats_list">'+l+"</ul>"}Object.defineProperty(exports,"__esModule",{value:!0}),exports.showBrickStats=s;
},{}],"d6sW":[function(require,module,exports) {
"use strict";var e=require("./imageprocessor"),t=require("./markupgenerator");const a={size:25,brightness:0,contrast:0},i={};function r(t){a[t.target.name]=parseInt(t.target.value),console.log(a),i.imageData&&(i.resizedImageData=(0,e.resizeImage)(i.imageData,a.size),g(i.resizedImageData))}function n(t){if(t.target.files){const r=t.target.files[0];i.reader.readAsDataURL(r),i.reader.onloadend=function(t){i.image.src=t.target.result,i.image.onload=function(t){const r=document.createElement("canvas"),n=r.getContext("2d");r.width=i.image.width,r.height=i.image.height,n.drawImage(i.image,0,0),i.imageData=n.getImageData(0,0,r.width,r.height),i.resizedImageData=(0,e.resizeImage)(i.imageData,a.size),g(i.resizedImageData)}}}}function g(i){const r=document.getElementById("myCanvas"),n=r.getContext("2d"),{width:g,height:s}=i;r.width=2*i.width,r.height=2*i.height,n.putImageData(i,0,0),(0,e.grayscale)(i),n.putImageData(i,g,0),(0,e.brightness)(i,a.brightness),(0,e.contrast)(i,a.contrast/2),n.putImageData(i,0,s),(0,e.levels)(i),n.putImageData(i,g,s);const o=document.querySelector("#brickCanvas"),m=(0,e.mapDataToBricks)(i);(0,e.showBricks)(m,o),(0,t.showBrickStats)(m,document.querySelector("#brickStats"))}i.reader=new FileReader,i.image=new Image,i.imgInput=document.getElementById("imageInput"),i.imgInput.addEventListener("change",n),i.optionsForm=document.querySelector("#options"),i.optionsForm.querySelectorAll("input").forEach(e=>e.addEventListener("change",r));
},{"./imageprocessor":"zemw","./markupgenerator":"DFWH"}]},{},["d6sW"], null)
//# sourceMappingURL=/brick-pic/main.642cd1ec.js.map