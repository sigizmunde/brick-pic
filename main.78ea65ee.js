parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"zemw":[function(require,module,exports) {
"use strict";function t(t,e){console.log("imageData = ",t);const n=t.width,r=t.height,a=Math.floor(n/e)||1,d=Math.floor(r/a);console.log("block width = ",a),console.log("new dimensions = ",e,"x",d);const l=new ImageData(e,d),{data:c}=l;for(let i=0;i<e;i+=1)for(let n=0;n<d;n+=1){const r=[0,0,0,0];for(let e=i*a;e<(i+1)*a;e+=1)for(let d=n*a;d<(n+1)*a;d+=1){const n=o(e,d,t);let l=0;for(;l<4;)r[l]+=n[l]/a**2,l+=1}let d=0;for(;d<4;)c[4*i+n*e*4+d]=Math.round(r[d]),d+=1}return console.log(l),l}function o(t,o,e){const n=o*(4*e.width)+4*t;return[e.data[n],e.data[n+1],e.data[n+2],e.data[n+3]]}function e({data:t}){for(let o=0;o<t.length;o+=4){const e=Math.round((t[o]+t[o+1]+t[o+2])/3),n=t[o+3],r=e*n/255+255-n;t[o]=r,t[o+1]=r,t[o+2]=r,t[o+3]=255}}function n({data:t},o=0){console.log("brightness = ",o);for(let e=0;e<t.length;e+=4){const n=(t[e]+t[e+1]+t[e+2])/3;let r=Math.round(n+n*o/10);r=r>255?255:r,t[e]=r,t[e+1]=r,t[e+2]=r}}function r({data:t},o=1){const e=t.reduce((t,o,e)=>(e+1)%4&&o>t?o:t,0),n=t.reduce((t,o,e)=>(e+1)%4&&o<t?o:t,255),r=(e-n)/2+n;if(console.log("min = ",n,", max = ",e,", middle = ",r,", coef = ",o),n!==e)for(let a=0;a<t.length;a+=4){const e=(t[a]+t[a+1]+t[a+2])/3;let n=Math.round(e+(e-r)*o);n=n>255?255:n<0?0:n,t[a]=n,t[a+1]=n,t[a+2]=n}}function a({data:t},o=1){let e=t.reduce((t,o,e)=>(e+1)%4&&o>t?o:t,0),n=t.reduce((t,o,e)=>(e+1)%4&&o<t?o:t,255);if(console.log("min = ",n,", max = ",e,", coef = ",o),n=(n=Math.round(n*o))>47?47:n,e=(e=Math.round(255-(255-e)*o))<160?160:e,console.log("min = ",n,", max = ",e),n!==e&&(0!==n||255!==e))for(let r=0;r<t.length;r+=4){const o=(t[r]+t[r+1]+t[r+2])/3;let a=Math.round(255/(e-n)*(o-n));a=a>255?255:a,t[r]=a,t[r+1]=a,t[r+2]=a}}function d({data:t},o=[63,127,191,255]){for(let e=0;e<t.length;e+=4){const n=Math.round((t[e]+t[e+1]+t[e+2])/3);let r=0;o.forEach(t=>{n>=t-16&&t>r&&(r=t)}),t[e]=r,t[e+1]=r,t[e+2]=r}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.resizeImage=t,exports.grayscale=e,exports.brightness=n,exports.contrast=r,exports.autoContrast=a,exports.levels=d,exports.mapDataToBricks=c,exports.showBricks=i;const l=[{id:0,border:0},{id:1,border:47},{id:2,border:111},{id:3,border:175},{id:4,border:239}];function c({data:t,width:o},e=l){const n={data:[],width:o,mapping:e};for(let r=0;4*r<t.length;r+=1){const o=Math.round((t[4*r]+t[4*r+1]+t[4*r+2])/3);let a=0;e.forEach(t=>{o>=t.border&&t.id>a&&(a=t.id)}),n.data[r]=a}return n}function i({data:t,width:o,mapping:e},n,r=16){const a=n.getContext("2d");a.clearRect(0,0,n.width,n.height),n.width=o*r,n.height=t.length/o*r,t.map((t,n)=>{var d;const l=((null===(d=e.find(o=>o.id===t))||void 0===d?void 0:d.border)||0).toString(16).padStart(2,"0");a.fillStyle="#"+l+l+l;const c=n%o,i=Math.floor(n/o);a.fillRect(c*r,i*r,r-1,r-1)})}
},{}],"d6sW":[function(require,module,exports) {
"use strict";var e=require("./imageprocessor");const t={size:25,brightness:0,contrast:0},a={};function i(i){t[i.target.name]=parseInt(i.target.value),console.log(t),a.imageData&&(a.resizedImageData=(0,e.resizeImage)(a.imageData,t.size),r(a.resizedImageData))}function n(i){if(i.target.files){const n=i.target.files[0];a.reader.readAsDataURL(n),a.reader.onloadend=function(i){a.image.src=i.target.result,a.image.onload=function(i){const n=document.createElement("canvas"),g=n.getContext("2d");n.width=a.image.width,n.height=a.image.height,g.drawImage(a.image,0,0),a.imageData=g.getImageData(0,0,n.width,n.height),a.resizedImageData=(0,e.resizeImage)(a.imageData,t.size),r(a.resizedImageData)}}}}function r(a){const i=document.getElementById("myCanvas"),n=i.getContext("2d"),{width:r,height:g}=a;i.width=2*a.width,i.height=2*a.height,n.putImageData(a,0,0),(0,e.grayscale)(a),n.putImageData(a,r,0),(0,e.brightness)(a,t.brightness),(0,e.contrast)(a,t.contrast/2),n.putImageData(a,0,g),(0,e.levels)(a),n.putImageData(a,r,g);const s=document.querySelector("#brickCanvas"),o=(0,e.mapDataToBricks)(a);(0,e.showBricks)(o,s)}a.reader=new FileReader,a.image=new Image,a.imgInput=document.getElementById("imageInput"),a.imgInput.addEventListener("change",n),a.optionsForm=document.querySelector("#options"),a.optionsForm.querySelectorAll("input").forEach(e=>e.addEventListener("change",i));
},{"./imageprocessor":"zemw"}]},{},["d6sW"], null)
//# sourceMappingURL=/brick-pic/main.78ea65ee.js.map